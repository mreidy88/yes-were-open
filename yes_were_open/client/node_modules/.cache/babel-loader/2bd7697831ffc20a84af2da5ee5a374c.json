{"ast":null,"code":"var _jsxFileName = \"/Users/mikereidy/supernovas/unit_4/project_4/yes-were-open/yes_were_open/client/src/App.js\";\nimport React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport Login from './Components/Login';\nimport Register from './Components/Register';\nimport { createUser, readAllUsers, updateUser, destroyUser, loginUser, registerUser, verifyUser } from './services/api-helper';\nimport Header from './Components/Header';\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getUsers = async () => {\n      const users = await readAllUsers();\n      this.setState({\n        users\n      });\n    };\n\n    this.newUser = async e => {\n      e.preventDefault();\n      const user = await createUser(this.state.teacherForm);\n      this.setState(prevState => ({\n        users: [...prevState.users, user],\n        userForm: {\n          name: \"\",\n          photo: \"\"\n        }\n      }));\n    };\n\n    this.editUser = async () => {\n      const {\n        userForm\n      } = this.state;\n      await updateUser(userForm.id, userForm);\n      this.setState(prevState => ({\n        users: prevState.users.map(user => {\n          return user.id === userForm.id ? userForm : user;\n        })\n      }));\n    };\n\n    this.deleteUser = async id => {\n      await destroyUser(id);\n      this.setState(prevState => ({\n        users: prevState.users.filter(user => user.id !== id)\n      }));\n    };\n\n    this.handleFormChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState(prevState => ({\n        teacherForm: { ...prevState.userForm,\n          [name]: value\n        }\n      }));\n    };\n\n    this.mountEditForm = async id => {\n      const users = await readAllUsers();\n      const user = users.find(el => el.id === parseInt(id));\n      this.setState({\n        userForm: user\n      });\n    };\n\n    this.resetForm = () => {\n      this.setState({\n        userForm: {\n          name: \"\",\n          email: \"\",\n          password: \"\"\n        }\n      });\n    };\n\n    this.handleLoginButton = () => {\n      this.props.history.push(\"./Components/login\");\n    };\n\n    this.handleLogin = async () => {\n      const currentUser = await loginUser(this.state.authFormData);\n      this.setState({\n        currentUser\n      });\n    };\n\n    this.handleRegister = async e => {\n      e.preventDefault();\n      const currentUser = await registerUser(this.state.authFormData);\n      this.setState({\n        currentUser\n      });\n    };\n\n    this.handleLogout = () => {\n      localStorage.removeItem(\"authToken\");\n      this.setState({\n        currentUser: null\n      });\n    };\n\n    this.authHandleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState(prevState => ({\n        authFormData: { ...prevState.authFormData,\n          [name]: value\n        }\n      }));\n    };\n\n    this.state = {\n      users: [],\n      userForm: {\n        name: \"\",\n        photo: \"\"\n      },\n      currentUser: null,\n      authFormData: {\n        username: \"\",\n        email: \"\",\n        password: \"\"\n      }\n    };\n  }\n\n  async componentDidMount() {\n    this.getUsers();\n    const currentUser = await verifyUser();\n\n    if (currentUser) {\n      this.setState({\n        currentUser\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      handleLoginButton: this.handleLoginButton,\n      handleLogout: this.handleLogout,\n      currentUser: this.state.currentUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 10\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"./Components/login\",\n      render: () => /*#__PURE__*/React.createElement(Login, {\n        handleLogin: this.handleLogin,\n        handleChange: this.authHandleChange,\n        formData: this.state.authFormData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"./Components/register\",\n      render: () => /*#__PURE__*/React.createElement(Register, {\n        handleRegister: this.handleRegister,\n        handleChange: this.authHandleChange,\n        formData: this.state.authFormData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/mikereidy/supernovas/unit_4/project_4/yes-were-open/yes_were_open/client/src/App.js"],"names":["React","Component","Route","Link","BrowserRouter","Router","Login","Register","createUser","readAllUsers","updateUser","destroyUser","loginUser","registerUser","verifyUser","Header","App","constructor","props","getUsers","users","setState","newUser","e","preventDefault","user","state","teacherForm","prevState","userForm","name","photo","editUser","id","map","deleteUser","filter","handleFormChange","value","target","mountEditForm","find","el","parseInt","resetForm","email","password","handleLoginButton","history","push","handleLogin","currentUser","authFormData","handleRegister","handleLogout","localStorage","removeItem","authHandleChange","username","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport Login from './Components/Login'\nimport Register from './Components/Register'\nimport {\n  createUser,\n  readAllUsers,\n  updateUser,\n  destroyUser,\n  loginUser,\n  registerUser,\n  verifyUser\n} from './services/api-helper'\nimport Header from './Components/Header';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      userForm: {\n        name: \"\",\n        photo: \"\"\n      },\n      currentUser: null,\n      authFormData: {\n        username: \"\",\n        email: \"\",\n        password: \"\"\n      }\n    };\n  }\n\n  async componentDidMount() {\n    this.getUsers();\n    const currentUser = await verifyUser();\n    if (currentUser) {\n      this.setState({ currentUser })\n    }\n  }\n\n  getUsers = async () => {\n    const users = await readAllUsers();\n    this.setState({\n      users\n    })\n  }\n\n  newUser = async (e) => {\n    e.preventDefault();\n    const user = await createUser(this.state.teacherForm);\n    this.setState(prevState => ({\n      users: [...prevState.users, user],\n      userForm: {\n        name: \"\",\n        photo: \"\"\n      }\n    }))\n  }\n\n  editUser = async () => {\n    const { userForm } = this.state\n    await updateUser(userForm.id, userForm);\n    this.setState(prevState => (\n      {\n        users: prevState.users.map(user => {\n          return user.id === userForm.id ? userForm : user\n        }),\n      }\n    ))\n  }\n\n  deleteUser = async (id) => {\n    await destroyUser(id);\n    this.setState(prevState => ({\n      users: prevState.users.filter(user => user.id !== id)\n    }))\n  }\n\n  handleFormChange = (e) => {\n    const { name, value } = e.target;\n    this.setState(prevState => ({\n      teacherForm: {\n        ...prevState.userForm,\n        [name]: value\n      }\n    }))\n  }\n\n  mountEditForm = async (id) => {\n    const users = await readAllUsers();\n    const user = users.find(el => el.id === parseInt(id));\n    this.setState({\n      userForm: user\n    });\n  }\n\n  resetForm = () => {\n    this.setState({\n      userForm: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n      }\n    })\n  }\n\n  // -------------- AUTH ------------------\n\n  handleLoginButton = () => {\n    this.props.history.push(\"./Components/login\")\n  }\n\n  handleLogin = async () => {\n    const currentUser = await loginUser(this.state.authFormData);\n    this.setState({ currentUser });\n  }\n\n  handleRegister = async (e) => {\n    e.preventDefault();\n    const currentUser = await registerUser(this.state.authFormData);\n    this.setState({ currentUser });\n  }\n\n  handleLogout = () => {\n    localStorage.removeItem(\"authToken\");\n    this.setState({\n      currentUser: null\n    })\n  }\n\n  authHandleChange = (e) => {\n    const { name, value } = e.target;\n    this.setState(prevState => ({\n      authFormData: {\n        ...prevState.authFormData,\n        [name]: value\n      }\n    }));\n\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n         <Header\n          handleLoginButton={this.handleLoginButton}\n          handleLogout={this.handleLogout}\n          currentUser={this.state.currentUser}\n        />\n        <Route exact path=\"./Components/login\" render={() => (\n          <Login\n            handleLogin={this.handleLogin}\n            handleChange={this.authHandleChange}\n            formData={this.state.authFormData} />)} />\n        <Route exact path=\"./Components/register\" render={() => (\n          <Register\n            handleRegister={this.handleRegister}\n            handleChange={this.authHandleChange}\n            formData={this.state.authFormData} />)} />\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}